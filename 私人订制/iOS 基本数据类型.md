[TOC]

## 数据模型

对于基本数据类型的大小，我们可以有多种选择，其中选择的实现统称为数据模型。（多种选择代表有多种数据模型）

### 32 位系统

#### LP32 (2/4/4)

int 为 16 位，2 个字节；long 和 pointer 为 32 位，4 个字节。

用于 Win16 API 系统

#### ILP32 (4/4/4)

int、long 和 pointer 都为 32 位，4 个字节。

适用于 Win32 API，Unix 和类 Unix 系统。

### 64 位系统

#### LLP64 (4/4/8)

int 和 long 为 32 位，4 个字节，long long 为 64 位，8个字节，pointer 也是 64 位，8 个字节。

适用于 Win64 API 系统。

#### LP64 (4/8/8)

int 为 32 位，4 个字节，long 和 pointer 为 64 位，8 个字节。

适用于 Unix 和类 Unix 系统。

#### ILP64 (8/8/8)

int、long 和 pointer 都为 64 位，8 个字节。

适用于某些早期 64 位 Unix 系统。（ Unicos on Cray 等）



## 整数类型

* int

  基本整数类型。使用修饰符可省略关键词 int。在没有长度修饰符的情况下，至少拥有 16 位宽度。然而在 32/64 位系统上，至少保证拥有 32 位宽度。

### 修饰符

修饰整数类型，能以任何顺序进行组合。但是定义整数类型时，每组修饰符只能存在一种。

#### 符号性

* signed 

  目标类型将拥有符号表示 （默认类型）

* unsigned

  目标类型将拥有无符号表示

#### 大小

* short 

  目标类型将为空间优化，至少拥有 16 位宽度。

* long

  目标类型将至少拥有 32 位宽度（c++ 标准是至少 16 位宽度，但现在的数据模型基本都是 32 位宽度起）。

* long long

  目标类型将至少拥有 64 位宽度。（c++ 11 起）

### 不同数据模型中的整数大小

| 类型指定符 | C++标准 | LP32 | ILP32 | LLP64 | ILP64 | LP64 |
| ---------- | ------- | ---- | ----- | ----- | ----- | ---- |
| short      | 至少16  | 16   | 16    | 16    | 16    | 16   |
| int        | 至少16  | 16   | 32    | 32    | 32    | 32   |
| long       | 至少32  | 32   | 32    | 32    | 64    | 64   |
| long long  | 至少64  | 64   | 64    | 64    | 64    | 64   |
| pointer    | 至少32  | 32   | 32    | 64    | 64    | 64   |

## 浮点类型

* float 

  单精度浮点类型。通常为 IEEE-754 32 位浮点类型。

* double

  双精度浮点类型。通常为 IEEE-754 64 位浮点类型。

* long double

  扩展精度浮点类型。不必映射到 IEEE-754 所强制的类型。在 x86 和 x86-64 架构上通常为 80 位 x87 浮点类型。

> 小知识
>
> float 和 double 的范围是由指数的位数来决定的。
>
> float 的指数有 8 位，而 double 的指数有 11 位，分布如下：
>
> | 浮点类型 | 符号位 | 指数位 | 尾数位 |
> | -------- | ------ | ------ | ------ |
> | float    | 1      | 8      | 23     |
> | double   | 1      | 11     | 52     |
>
>

## 拓展

#### 在32位系统中

int 占4个字节 
long 占4个字节 
NSInteger 是int的别名，占4个字节 
long long 占8个字节 
int32_t 是int的别名，占4个字节 
int64_t 是long long的别名，占8个字节



#### 在64位系统中

int 占4个字节 
long 占8个字节 
NSInteger 是long的别名，占8个字节 
long long 占8个字节 
int32_t 是int的别名，占4个字节 
int64_t 是long long的别名，占8个字节

**由于long和NSInteger的字节数变了，所以在兼容的时候可能会导致溢出**